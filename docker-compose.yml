services:
  questdb:
    image: questdb/questdb:7.3.9
    hostname: questdb
    container_name: questdb
    ports:
      - "9000:9000"
    restart: unless-stopped
    environment:
      - QDB_PG_READONLY_USER_ENABLED=true
    volumes:
      - questdb-storage:/var/lib/questdb

  grafana:
    image: grafana/grafana-oss:10.1.0
    hostname: grafana
    container_name: grafana
    restart: unless-stopped
    environment:
      - GF_INSTALL_PLUGINS=ae3e-plotly-panel
    volumes:
      - grafana-storage:/var/lib/grafana
  nginx:
    image: nginx:1.25-alpine
    container_name: nginx
    ports:
      - "80:80"
      - "443:443"
      - "3756:3756"
    volumes:
      - ${PWD}/nginx.conf:/etc/nginx/conf.d/default.conf
volumes:
  grafana-storage: {}
  questdb-storage: {}
